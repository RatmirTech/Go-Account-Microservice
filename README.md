# Документация по проекту Go-Account-Microservice

## Структура проекта

### Dockerfile
Сценарий сборки Docker-образа для сервиса. Описывает установку зависимостей и запуск приложения.

### go.mod / go.sum
Файлы управления зависимостями Go-модуля. go.mod содержит список используемых пакетов, go.sum — контрольные суммы.

### LICENSE
Лицензия проекта.

### README.md
Документация и инструкции по запуску.

### cmd/server/main.go
Точка входа в приложение. Инициализация конфигурации, логгера, базы данных, запуск HTTP-сервера.

### configs/config.yaml
Конфигурационный файл с параметрами сервиса (порт, база данных, секреты и т.д.).

### deployments/docker-compose.yml
Файл для запуска инфраструктуры (Postgres, сервис) через Docker Compose.

### internal/app/account/
- **handler.go** — HTTP-обработчики для регистрации, логина, получения профиля, обновления и выхода из аккаунта.
- **models.go** — Модели данных пользователя и токенов для бизнес-логики.
- **service.go** — Сервисный слой: регистрация, логин, обновление токенов, выход, получение пользователя.
- **utils.go** — Вспомогательные функции (например, хеширование паролей).

### internal/config/config.go
Загрузка и парсинг конфигурации из config.yaml.

### internal/db/
- **models.go** — Модели для работы с базой данных (User, RefreshToken и др.).
- **postgres.go** — Инициализация подключения к Postgres, методы для работы с пользователями и токенами.
- **queries.go** — SQL-запросы для работы с таблицами пользователей и токенов.

### internal/token/manager.go
Генерация, парсинг и валидация JWT-токенов (access и refresh).

### internal/transport/rest/
- **routes.go** — Описание маршрутов HTTP API, подключение middleware.
- **middleware/auth.go** — Middleware для проверки JWT и авторизации пользователя.

### migrations/
SQL-миграции для создания и изменения структуры базы данных (таблицы пользователей, токенов).

### scripts/
- **dev.sh** — Скрипт для локального запуска сервиса.
- **migrate.sh** — Скрипт для применения миграций.
- **migrations/** — Дополнительные миграции.

### test/
Тесты для проверки бизнес-логики и API.

---

## Быстрый старт

1. Настройте config.yaml
2Используйте эндпоинты:
   - POST /api/register — регистрация
   - POST /api/login — вход
   - GET /api/me — профиль (требует access_token)
   - POST /api/refresh — обновление токенов
   - POST /api/logout — выход

## Swagger/OpenAPI
Для автодокументации API рекомендуется использовать swaggo/swag и аннотации в обработчиках.

## Контакты и поддержка
Вопросы и предложения — через Issues на GitHub.

